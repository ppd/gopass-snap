name: gopass
base: core18
version: "1.8.6"
summary: The slightly more awesome Standard Unix Password Manager for Teams
description: | 
  gopass is a rewrite of the pass password manager in Go with the aim of making it 
  cross-platform and adding additional features. Our target audience are professional 
  developers and sysadmins (and especially teams of those) who are well versed with a 
  command line interface. One explicit goal for this project is to make it more approachable 
  to non-technical users. We go by the UNIX philosophy and try to do one thing and do it well, 
  providing a stellar user experience and a sane, simple interface.
icon: logo.svg

grade: stable
confinement: strict
license: MIT

plugs:
  home: null
  gpg-keys: null
  ssh-keys: null # for git
  x11: null # for xsel
  network-bind: null
  
apps:
  gopass:
    command: bin/gopass
    command-chain: [wrap-gopass, set-up-gpg, set-up-ssh]

parts:
  launchers:
    plugin: dump
    source: snap/local

  gopass:
    plugin: go
    go-importpath: github.com/gopasspw/gopass
    source: https://github.com/gopasspw/gopass.git
    source-tag: "v1.8.6"
    build-packages:
      - gcc
    stage-packages:
      - git
      - rng-tools
      - xsel
      - gpg
      - gpg-agent
      - gpgconf
      - gpgsm
      - gpgv
      - pinentry-curses
      - bsdutils
      - openssh-client

layout:
  /etc/gnupg:
    bind: $SNAP/etc/gnupg
  /usr/bin/dirmngr:
    bind-file: $SNAP/usr/bin/dirmngr
  /usr/bin/gpg:
    bind-file: $SNAP/usr/bin/gpg
  /usr/bin/gpg-agent:
    bind-file: $SNAP/usr/bin/gpg-agent
  /usr/bin/gpg-connect-agent:
    bind-file: $SNAP/usr/bin/gpg-connect-agent
  /usr/bin/gpgconf:
    bind-file: $SNAP/usr/bin/gpgconf
  /usr/bin/gpgsm:
    bind-file: $SNAP/usr/bin/gpgsm
  /usr/bin/gpgv:
    bind-file: $SNAP/usr/bin/gpgv
  /usr/bin/pinentry:
    bind-file: $SNAP/usr/bin/pinentry-curses
  /usr/lib/gnupg:
    bind: $SNAP/usr/lib/gnupg
  /usr/share/gnupg:
    bind: $SNAP/usr/share/gnupg
  
